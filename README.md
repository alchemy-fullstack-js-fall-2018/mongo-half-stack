# Mongo Half Stack

Keep track of your spies and villains with this handy E2E-tested server app powered by MongoDB.

## Table of Contents
* [Classes](#classes)
    * [Spies](#class-spies)
    * [Villains](#class-villains)
* [Methods](#methods)
    * [get](#method-getid)
    * [getAll](#method-getallquery)
    * [create](#method-createdata)
    * [update](#method-updateid-data)
    * [delete](#method-deleteid)
* [Usage](#usage)
* [Notes](#notes)

## Classes

The resources available in this app have the same exact methods. All of the following methods may be applied to `/spies` or `/villains`.

#### Class: Spies

Name | Type | Description
------------ | ------------- | --------------
`id` | [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | generated by uuid
`name` | [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | one of his many callsigns...
`weapon` | [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | by any means necessary, right?
`vehicle` | [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | a spy needs a whip to get around

#### Class: Villains

Name | Type | Description
------------ | ------------- | --------------
`id` | [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | generated by uuid
`name` | [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | it gives me shivers
`weapon` | [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | there's going to be a massive weakness, trust me
`motive` | [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | don't try to analyze it too much


## Methods

#### Method: get(id)

get is a function that returns the values of a spy or villain

###### Input

Name | Type | Default | Description
------------ | ------------- | -------------- | ------------
`id` | [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | | `required` generated by uuid

###### Output

Type | Description
------------ | -------------
[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | an object that has the normal resource properties

###### Errors

* throws `404` if spy or villain doesn't exist


#### Method: getAll(query)

getAll is a function that returns the values of all spies or villains which match the given query

###### Input

Name | Type | Default | Description
------------ | ------------- | -------------- | ------------
`query` | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Objects) | `null` | `optional` A full match is performed on the query. For instance, if searching for `James Bond`, `James` will not be a match, but `James Bond` will be. The query object can contain the values of as many properties as desired to achieve the perfect match.

###### Output

Type | Description
------------ | -------------
[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Objects) | an object that has the normal resource properties

###### Errors

* returns null if there are no matches


#### Method: create(data)

create is a function that creates a new entry for a spy or villain

###### Input

Name | Type | Default | Description
------------ | ------------- | -------------- | ------------
`id` | [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | | `required` generated by uuid
`data` | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Objects) |  | `required` Required for a new resource to be created. Properties must match the resource class's props.

###### Output

Type | Description
------------ | -------------
[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Objects) | The values supplied to create the resource are returned, along with the autogenerated ID


#### Method: update(id, data)

create is a function that creates a new entry for a spy or villain

###### Input

Name | Type | Default | Description
------------ | ------------- | -------------- | ------------
`data` | [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Objects) |  | `required` Required for a resource to be updated. Properties must match the resource class's props.

###### Output

Type | Description
------------ | -------------
[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Objects) | All of the object's properties are returned.

#### Method: delete(id)

delete is a function that the entry for a spy or villain based upon the supplied id

###### Input

Name | Type | Default | Description
------------ | ------------- | -------------- | ------------
`id` | [String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type) | | `required` generated by uuid

###### Output

Type | Description
------------ | -------------
[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Objects) | All of the deleted object's properties are returned.




## Usage:

In order to use our app, be sure to fill in the correct environment variables in an `.env` file located in the root of the project. You will need to have `node` (version 10+) and `mongodb` installed. Call `npm i` after cloning the project to installed the necessary `node` dependencies. You may visit the official websites for node and mongo if you have not installed either yet.

## Notes:

* Weird behavior for `app.test.js`: When starting Jest for the first time, it fails a test or two, due to undefined return values. However, once the tests run once or twice (triggerable by simply saving the file), all tests pass and remain passed until Jest is stopped.
